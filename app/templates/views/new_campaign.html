<ion-view>
    <ion-header-bar align-title="center">
        <button class="button button-icon icon ion-navicon" style="display: block;color:#000;" menu-toggle="left"></button>
        <h1 class="title">Create Campaign</h1>
    </ion-header-bar>
    <ion-content>
        <div class="redapp_bg CAMPAIN newcampain_PENAL" ng-show="cp_screen_first">
            <form name="campagin_first" novalidate>
                <div class="row padding_remove">
                    <div class="col padding_remove">
                        <p>Campaign Name</p>
                        <div class="card margin_top">
                            <div class="campagin">
                                <img src="images/ic_coupon_active@x.png">
                                <input type="text" placeholder="Campaign Name" name="cp_name" ng-model="camp_data.cp_name" required>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="new_camp_val" ng-if="campagin_first.cp_name.$touched && campagin_first.cp_name.$invalid">Campaign name is required.</p>
                <div class="row padding_remove">
                    <div class="col padding_remove">
                        <p>Start Date</p>
                        <div class="card margin_top">
                            <div class="campagin">
                                <img src="images/ic_date_active@x.png">
                                <ionic-datepicker idate="camp_data.start_date" disablepreviousdates="true">
                                    <button ng-click="openFromDatePicker()" class="button button-block icon-right ion-ios-arrow-down noBackground" style="color:#fff;"> {{camp_data.start_date | date:'dd-MMMM-yyyy' }}{{!camp_data.start_date?'From':''}} </button>
                                </ionic-datepicker>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row padding_remove">
                    <div class="col padding_remove">
                        <p>End date</p>
                        <div class="card margin_top">
                            <div class="campagin">
                                <img src="images/ic_date_active@x.png">
                                <ionic-datepicker idate="camp_data.end_date" disablepreviousdates="true">
                                    <button ng-click="openToDatePicker()" class="button button-block icon-right ion-ios-arrow-down noBackground" style="color:#fff;"> {{ camp_data.end_date | date:'dd-MMMM-yyyy' }}{{!camp_data.end_date?'To':''}} </button>
                                </ionic-datepicker>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="new_camp_val" ng-show="isToTouched && !camp_data.end_date">End date is required</p>
                <!-- Discount type -->
                <!--                 <div class="row padd_NUN">
                    <div class="col disscount padd_NUN">
                        <p class="Discount_type_TEXT">Discount Type</p>
                    </div>
                </div>
                <div class="row padd_NUN botom_mgn">
                    <div class="col padding_remove">
                        <ion-radio name="discount_type_option" ng-model="camp_data.discount_type" ng-value="'price'">$</ion-radio>
                    </div>
                    <div class="col padding_remove">
                        <ion-radio name="discount_type_option" ng-model="camp_data.discount_type" ng-value="'percent'">%</ion-radio>
                    </div>
                    <div class="col padding_remove">
                        <ion-radio name="discount_type_option" ng-model="camp_data.discount_type" ng-value="'free_item'">Free item</ion-radio>
                    </div>
                    <div class="col padding_remove">
                        <ion-radio name="discount_type_option" ng-model="camp_data.discount_type" ng-value="'buy_1_get_1'">Buy 1 Get 1</ion-radio>
                    </div>
                </div>
                <div class="row padding_remove card" ng-if="camp_data.discount_type=='buy_1_get_1'">
                    <div class="col padding_remove flot_pera">
                        <p>Buy</p>
                        <input type="number" name="buy" ng-model="camp_data.buy_value" min="1" required>
                    </div>
                    <div class="col padding_remove flot_pera">
                        <p>Get</p>
                        <input type="number" name="get" ng-model="camp_data.get_value" min="1" required>
                    </div>
                </div>
                <p class="new_camp_val" ng-show="campagin_first.buy.$touched && campagin_first.buy.$error.required">Buy is required</p>
                <p class="new_camp_val" ng-show="campagin_first.buy.$touched && campagin_first.buy.$error.min">Buy should not be less than 1%</p>
                <p class="new_camp_val " ng-show="campagin_first.get.$touched && campagin_first.get.$error.required">Get is required</p>
                <p class="new_camp_val " ng-show="campagin_first.get.$touched && campagin_first.get.$error.min">Get should not be less than 1%</p>
                <div class="row padding_remove " ng-if="camp_data.discount_type=='price' || camp_data.discount_type=='percent'">
                    <div class="col padding_remove">
                        <div class="card margin_top">
                            <div class="campagin">
                                <img ng-src="images/{{camp_data.discount_type=='price'?'ic_discount_amount_active@x.png':'ic_discount_type_active@x.png'}}">
                                <input type="number" placeholder="Discount" name="dis_amount" min="1" ng-model="camp_data.discount_amount" required>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="new_camp_val" ng-show="campagin_first.dis_amount.$touched && campagin_first.dis_amount.$error.required">Discount amount is required</p>
                <p class="new_camp_val" ng-show="campagin_first.dis_amount.$touched && campagin_first.dis_amount.$error.min">Discount amount should not be less than 1%</p> -->
                <div class="row padding_remove">
                    <div class="col padding_remove">
                        <p class="Discount_type_TEXT">Offer</p>
                        <div class="campagin_INFO_HEIGHT margin_top">
                            <div class="campagin_INFO TEXT_ARARARA">
                                <textarea class="text_box_area" rows="6" cols="21" placeholder="Example: 20% OFF on oil change (max 100 characters)" ng-model="camp_data.cp_offer" name="camp_offer" maxlength="100" required></textarea>
                                <!-- <input type="text area" name="cp_info" ng-model="camp_data.cp_info"> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="padding">
                    <p class="new_camp_val" ng-if="campagin_first.camp_offer.$touched && campagin_first.camp_offer.$invalid">Offer is required/invalid.</p>
                </div>
                <div class="row padding_remove">
                    <div class="col padding_remove">
                        <p class="Discount_type_TEXT">Terms & Conditions</p>
                        <div class="campagin_INFO_HEIGHT margin_top">
                            <div class="campagin_INFO TEXT_ARARARA">
                                <textarea class="text_box_area" rows="6" cols="21" placeholder="Please Enter Text.." ng-model="camp_data.cp_terms" name="camp_terms" required></textarea>
                                <!-- <input type="text area" name="cp_terms" ng-model="camp_data.cp_terms"> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="padding">
                    <p class="new_camp_val" ng-if="campagin_first.camp_terms.$touched && campagin_first.camp_terms.$invalid">Terms & Conditions is required.</p>
                </div>
            </form>
            <div class="row padding_remove">
                <div class="col  new_back_create padding_remove">
                    <button class="button" ng-click="campagin_first.$valid && camp_data.end_date && goToNext()">Next</button>
                    <center>
                        <p class="new_camp_val" ng-if="campagin_first.$invalid || !camp_data.end_date">Please fill all required fields.</p>
                    </center>
                </div>
            </div>
        </div>
        <section ng-show="cp_screen_second">
            <div class="Offer_ZONE_CONTr">
                <div class="OFER_COUPEN_question">How customer will get coupon code?</div>
                <ion-list>
                    <ion-checkbox ng-model="add_options.withShare" ng-click="add_options.withShare=true;add_options.withoutShare=false;">Only after customer share coupon
                        <!--  with someone -->
                    </ion-checkbox>
                    <ion-checkbox ng-model="add_options.withoutShare" ng-click="add_options.withShare=false;add_options.withoutShare=true;">Without Sharing</ion-checkbox>
                </ion-list>
            </div>
            <div class="Offer_ZONE_CONTr" ng-if="add_options.withoutShare">
                <div class="OFER_COUPEN_question">Do you want to give additional discount to customer for coupon sharing ?</div>
                <ion-list>
                    <ion-checkbox ng-model="add_options.withShareAddYes" ng-click="add_options.withShareAddYes=true;add_options.withShareAddNo=false;">Yes</ion-checkbox>
                    <ion-checkbox ng-model="add_options.withShareAddNo" ng-click="add_options.withShareAddYes=false;add_options.withShareAddNo=true;">No</ion-checkbox>
                </ion-list>
            </div>
            <div class="Offer_ZONE_CONTr" ng-if="add_options.withoutShare && add_options.withShareAddYes">
                <div class="OFER_COUPEN_question">Additional Discount type</div>
                <ion-list>
                    <ion-checkbox ng-model="add_options.withDiscountTypePer" ng-click="add_options.withDiscountTypePer=true;add_options.withDiscountTypeDol=false;">%</ion-checkbox>
                    <ion-checkbox ng-model="add_options.withDiscountTypeDol" ng-click="add_options.withDiscountTypeDol=true;add_options.withDiscountTypePer=false;">$</ion-checkbox>
                </ion-list>
            </div>
            <div class="Offer_ZONE_CONTr" ng-if="add_options.withoutShare && add_options.withShareAddYes">
                <div class="OFER_COUPEN_question">Additional Discount</div>
                <div class="list">
                    <label class="item item-input Discount_TYpe">
                        <input type="number" ng-model="add_options.withDiscountVal" placeholder="Enter Discount">
                    </label>
                </div>
            </div>
            </div>
            <div class="row padding_remove">
                <div class="col send_option EDIT_camp PINK_COR_BTN">
                    <button type="button" ng-click="goToCoupon()">Coupon Preview</button>
                </div>
                <div class="col send_option EDIT_camp">
                    <button type="button" ng-click="goBack()">Back</button>
                </div>
            </div>
        </section>
        <section ng-show="cp_screen_third">
            <div class="bg_FOr_cupn">
                <div class="row">
                    <div class="col text-center">
                        <div class="logo">
                            <img ng-if="!user_data.business_logo" ng-src="images/redlogo@x.png">
                            <img ng-if="user_data.business_logo" ng-src="{{base}}/storage/business_logo/{{user_data.business_logo}}">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="heading_top">
                            <h1>{{camp_data.business_name?camp_data.business_name:camp_data.cp_name}}</h1>
                            <p><strong>Valid date:</strong> {{getDateFormally(camp_data.start_date)}} to {{getDateFormally(camp_data.end_date)}}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg_FOr_cupn">
                <div class="row">
                    <div class="custom_crd">
                        <div class="item-text-wrap">
                            <p class="CUPEEN_hding_TEXT"><span>How to Activate</span></p>
                            <p class="CUPEEN_TEXT">1.Click on "Get Coupon" button.</p>
                            <p class="CUPEEN_TEXT" ng-if="camp_data.cp_share">2.Share on social media.</p>
                            <p class="CUPEEN_TEXT" ng-if="camp_data.cp_share">3.Your coupon will activate when your friends share it.</p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col Facebook_login text-center padding_remove">
                        <button class="button"><span>
                    Get Coupon
                    <!-- <img src="images/ic_facebooKk@x.png"></span>Sign In with <span>Facebook  --></span></button>
                    </div>
                </div>
                <p class="note_TEXT" ng-if="camp_data.add_discount">Note: Share your coupon with friends and family to get additional discount of {{camp_data.add_discount_value}}.</p>
            </div>
            <div class="bg_FOr_cupn">
                <div class="row">
                    <div class="custom_crd">
                        <div class="item-text-wrap BDRS">
                            <p class="CUPEN_OFR_FILD"><span>Offers</span></p>
                            <p class="CUPEN_OFR_FILD_right">{{camp_data.cp_offer}}</p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="custom_crd">
                        <div class="item-text-wrap BDRS">
                            <p class="CUPEN_OFR_FILD"><span>Redeemable At</span>
                                <div class="CUPEN_OFR_FILD_right_tow" ng-if="camp_data.redeemable_at=='location'">
                                    <p class="MAGNN_NO">{{camp_data.business_address}},{{camp_data.city}},{{camp_data.state}}</p>
                                </div>
                                <div class="CUPEN_OFR_FILD_right_tow" ng-if="camp_data.redeemable_at=='online'">
                                    <p class="MAGNN_NO">{{camp_data.web_address}}
                                </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="custom_crd">
                        <div class="item-text-wrap BDRS">
                            <p class="CUPEN_OFR_FILD"><span>CODE</span></p>
                            <p class="CUPEN_OFR_FILD_right">XXXXXX</p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="custom_crd">
                        <div class="item-text-wrap BDRS">
                            <p class="CUPEN_OFR_FILD"><span>STATUS</span></p>
                            <p class="CUPEN_OFR_FILD_right">{{camp_data.cp_share ? 'Not Activated' : 'Activated'}}</p>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            <div class="bg_FOr_cupn_red">
                <div class="row">
                    <div class="custom_crd">
                        <div class="item-text-wrap">
                            <p class="TERM_CDTN"><span>Terms & Conditions : </span> {{camp_data.cp_terms}}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row padding_remove">
                <div class="col send_option EDIT_camp PINK_COR_BTN">
                    <button type="button" ng-click="createCampaign()"> Create Campaign</button>
                </div>
                <div class="col send_option EDIT_camp">
                    <button type="button" ng-click="goBack()"> Edit</button>
                </div>
            </div>
        </section>
    </ion-content>
</ion-view>
